## Synopsis
Taskwarrior Input is a command-line Python script intended to simplify
adding tasks to Taskwarrior. It opens a text editor into which you can put
several tasks (one per line) using a simplified syntax. This syntax does provide
support for UDAs.

## Usage
On the command line, invoke:

    python3 twinput.py

If you wish to use an editor other than Vim or the editor in the $EDITOR
variable, use:

    python3 twinput.py [-e {EDITOR}]


On *nix terminals, the execute bit should be set on the script. Executing the
script directly should invoke the Python 3 interpreter (i.e. the direct call to
python3 can be omitted).

This will create a temporary text file and open it in the editor. Lines that
begin with a hash (#) are comments and will be ignored by the parser. The syntax
for adding a task is:

    ([P]) [TASK DESCRIPTION] @[TAG] +[PROJECT.NAME] [ATTRIBUTE]:[VALUE]

An example of this syntax will be added to the top of the temporary file opened
by Taskwarrior Input.

"P" stands for one of the priority codes defined in your .taskrc. If you have a
default priority defined (which is the out-of-the-box behavior of Taskwarrior)
omitting this is fine. If you do not have a default priority, an error will be
generated. Per the Todo.txt format, the priority must come first (if present)
then the task description. Everything else in the line can be in whatever order
is desired.

As long as Taskwarrior has a default priority configured, the only required
element of the line is the task description. All other elements may appear only
once with the exception of the tags. You may attach as many tags as you desire.
Duplicating any attribute or project name will probably not result in an error,
but will result in undefined behavior. The supported attributes will be listed
in the syntax example in the text editor. The ability to use any valid
Taskwarrior attribute (including UDAs, if defined) will be added soon.

If there is an error of the syntax of any of the commands, the text editor will
be re-opened with the offending lines presented and commented out. Unless there
was a problem with the description, all of these tasks will have already been
added to Taskwarrior. Below the line, the error that caused the failure to parse
will also be presented as a comment. You will be given the chance to repair the
problem and re-attempt to add the task.

Before adding a task, Taskwarrior Input will create an MD5 hash of the task
description. Before attempting to add the task, Taskwarrior Input will attempt
to find a task with the same MD5 hash. If one is found, then the task will
simply be updated rather than re-created. So, in the error case mentioned above,
if the task was added but the attributes were not correctly parsed, the task
will be updated with the corrected attributes rather than being duplicated. This
also means that it is possible to update a task's information through
Taskwarrior Input, although in most cases it would probably be easier to make
the modifications to the task directly in Taskwarrior.

Taskwarrior Input will also parse TODO source code comments inside of a git
repository. To invoke this functionality, you'll want to prepare a template
file called `.twparse`. This file should follow the syntax described below,
except you use the placeholder $TODO instead of the task description. All TODO
comments found in your code will use that general format for creating the
Taskwarrior tasks, replacing the placeholder with the text of the actual
comment. Once the file is created, you can parse all of the TODO comments by
navigating into the directory and invoking:

    python3 twinput.py -g

NOTE: Any errors generated by Taskwarrior Input in gitgrep mode will be
suppressed. This behavior might change in the future.

## Motivation
[Taskwarrior](https://taskwarrior.org) is a fantastic to-do list manager. It is
highly configurable to any workflow and offers highly customizable reports.
However, while it is easy to generate reports and manipulate individual tasks,
adding tasks can be tedious. This is especially true if one wants to add several
tasks.

Conversely, the [Todo.txt](http://todotxt.com) format makes adding tasks very
easy, but doesn't quite provide the same reporting power as Taskwarrior. This
script is intended to bring the best of both worlds together. The

## Installation
### Dependencies
- Python 3
- Taskwarrior
- The following Python libraries (use pip3 to install):
    - taskw
- TODO: List all libraries involved in installing twinput

### Obtaining the Script
Before using twinput, you will need to define a UDA in Taskwarrior to hold the
MD5 hash of the description generated on task creation. To define this UDA, use
the following Taskwarrior commands:

    task config uda.twi_hash.type string
    task config uda.twi_hash.label "twinput description hash"

In the future, a feature might be added to disable dupe prevention making this
step unnecessary. For now, however, twinput will fail without this UDA.

To install the script itself , download the latest version of the script from
the BitBucket repository or run:

    git clone git@bitbucket.org:DerHabicht/twinput.git
    git checkout develop

This script is still considered to be in development, so you'll have to get the
most recent version from the develop branch until I consider it stable enough to
merge into the master branch.

If you wish, you can create a symlink to the script in your ~/bin directory (or
other directory listed in your $PATH variable) to simplify invocation.

## Contributors
- Robert Herschel Hawk <robert@the-hawk.us>

## License
Copyright (C) 2016 Robert Herschel Hawk

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
